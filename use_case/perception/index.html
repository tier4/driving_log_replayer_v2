
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tier4.github.io/driving_log_replayer_v2/use_case/perception/">
      
      
        <link rel="prev" href="../obstacle_segmentation/">
      
      
        <link rel="next" href="../performance_diag/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Evaluate perception - driving_log_replayer_v2 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#evaluate-perception" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="driving_log_replayer_v2 Documentation" class="md-header__button md-logo" aria-label="driving_log_replayer_v2 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            driving_log_replayer_v2 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Evaluate perception
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ja/use_case/perception/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tier4/driving_log_replayer_v2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  driving_log_replayer_v2 Documentation

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../quick_start/installation/" class="md-tabs__link">
          
  
  
    
  
  Quick start

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../trouble_shooting/" class="md-tabs__link">
          
  
  
    
  
  Trouble shooting

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../overview/" class="md-tabs__link">
          
  
  
    
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scenario_format/" class="md-tabs__link">
          
  
  
    
  
  Scenario format

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../result_format/" class="md-tabs__link">
          
  
  
    
  
  Result format

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Use case

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../analyzer/" class="md-tabs__link">
          
  
  
    
  
  Analyzer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="driving_log_replayer_v2 Documentation" class="md-nav__button md-logo" aria-label="driving_log_replayer_v2 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    driving_log_replayer_v2 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tier4/driving_log_replayer_v2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    driving_log_replayer_v2 Documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Quick start
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Quick start
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run driving_log_replayer_v2 evaluation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../trouble_shooting/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Trouble shooting
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Trouble shooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../scenario_format/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Scenario format
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Scenario format
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../result_format/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Result format
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Result format
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Use case
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Use case
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../localization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate NDT estimation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yabloc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate YabLoc estimation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eagleye/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate Eagleye estimation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ar_tag_based_localizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate ArTagBasedLocalizer estimation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../obstacle_segmentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate point cloud generation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Evaluate perception
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Evaluate perception
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#downloading-model-files" class="md-nav__link">
    <span class="md-ellipsis">
      Downloading Model Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-of-model-files" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion of model files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-method" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-results" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evaluation results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perception-normal" class="md-nav__link">
    <span class="md-ellipsis">
      Perception Normal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perception-error" class="md-nav__link">
    <span class="md-ellipsis">
      Perception Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skipping-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Skipping evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skipping-evaluationnogtnoobject" class="md-nav__link">
    <span class="md-ellipsis">
      Skipping evaluation(NoGTNoObject)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topic-name-and-data-type-used-by-evaluation-script" class="md-nav__link">
    <span class="md-ellipsis">
      Topic name and data type used by evaluation script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments-passed-to-logging_simulatorlaunch" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments passed to logging_simulator.launch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependent-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Dependent libraries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependent libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#division-of-roles-of-driving_log_replayer_v2-with-dependent-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Division of roles of driving_log_replayer_v2 with dependent libraries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      About simulation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="About simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topic-to-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topic to be included in the input rosbag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topics-that-must-not-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topics that must not be included in the input rosbag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      About Evaluation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="About Evaluation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-format" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-result-format" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Result Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pickle-file" class="md-nav__link">
    <span class="md-ellipsis">
      pickle file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-file-of-database-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Result file of database evaluation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance_diag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate LiDAR diagnostics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotationless_perception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate Annotationless Perception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traffic_light/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate perception(traffic light)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perception_2d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate perception(Camera)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../planning_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate Planning Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate Diagnostics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ground_segmentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate Ground Segmentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../all_components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate All Components
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../analyzer/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Analyzer
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Analyzer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#downloading-model-files" class="md-nav__link">
    <span class="md-ellipsis">
      Downloading Model Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-of-model-files" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion of model files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-method" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-results" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evaluation results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perception-normal" class="md-nav__link">
    <span class="md-ellipsis">
      Perception Normal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perception-error" class="md-nav__link">
    <span class="md-ellipsis">
      Perception Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skipping-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Skipping evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skipping-evaluationnogtnoobject" class="md-nav__link">
    <span class="md-ellipsis">
      Skipping evaluation(NoGTNoObject)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topic-name-and-data-type-used-by-evaluation-script" class="md-nav__link">
    <span class="md-ellipsis">
      Topic name and data type used by evaluation script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments-passed-to-logging_simulatorlaunch" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments passed to logging_simulator.launch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependent-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Dependent libraries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependent libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#division-of-roles-of-driving_log_replayer_v2-with-dependent-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Division of roles of driving_log_replayer_v2 with dependent libraries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      About simulation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="About simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topic-to-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topic to be included in the input rosbag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topics-that-must-not-be-included-in-the-input-rosbag" class="md-nav__link">
    <span class="md-ellipsis">
      Topics that must not be included in the input rosbag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      About Evaluation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="About Evaluation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-format" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-result-format" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Result Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pickle-file" class="md-nav__link">
    <span class="md-ellipsis">
      pickle file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-file-of-database-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Result file of database evaluation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="evaluate-perception">Evaluate perception<a class="headerlink" href="#evaluate-perception" title="Permanent link">#</a></h1>
<p>The performance of Autoware's recognition function (perception) is evaluated by calculating mAP (mean Average Precision) and other indices from the recognition results.</p>
<p>The perception topic is saved when Autoware is executed. The evaluation is then performed during post-processing.</p>
<p>The topic for pass/fail is based on the evaluation_task described in scenario.yaml. The topic to be analyzed can be specified from terminal arguments. If not specified, the default value is used.</p>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">#</a></h2>
<p>In perception evaluation, machine learning pre-trained models are used.
If the model is not prepared in advance, Autoware will not output recognition results.
If no evaluation results are produced, check to see if this has been done correctly.</p>
<h3 id="downloading-model-files">Downloading Model Files<a class="headerlink" href="#downloading-model-files" title="Permanent link">#</a></h3>
<p>Models are downloaded during Autoware setup.
The method of downloading models depends on the version of Autoware you are using, so check which method is used.
The following patterns exist.</p>
<h4 id="download-with-ansible">Download with ansible<a class="headerlink" href="#download-with-ansible" title="Permanent link">#</a></h4>
<p>When you run the ansible setup script, you will see <code>Download artifacts? [y/N]</code>, type <code>y</code> and press enter (Autoware foundation's main branch use this method)
<a href="https://github.com/autowarefoundation/autoware/blob/main/ansible/roles/artifacts/tasks/main.yaml">https://github.com/autowarefoundation/autoware/blob/main/ansible/roles/artifacts/tasks/main.yaml</a></p>
<h4 id="automatically-downloaded-when-the-package-is-built">Automatically downloaded when the package is built<a class="headerlink" href="#automatically-downloaded-when-the-package-is-built" title="Permanent link">#</a></h4>
<p>If you are using a slightly older Autoware.universe, this is the one to use, until the commit hash of <code>13b96ad3c636389b32fea3a47dfb7cfb7813cadc</code>.
<a href="https://github.com/autowarefoundation/autoware.universe/blob/13b96ad3c636389b32fea3a47dfb7cfb7813cadc/perception/lidar_centerpoint/CMakeLists.txt#L112-L118">lidar_centerpoint/CMakeList.txt</a></p>
<h3 id="conversion-of-model-files">Conversion of model files<a class="headerlink" href="#conversion-of-model-files" title="Permanent link">#</a></h3>
<p>The downloaded onnx file is not to be used as-is, but to be converted to a TensorRT engine file for use.
A conversion command is available, so source the autoware workspace and execute the command.</p>
<p>Let's assume that autoware is installed in <code>$HOME/autoware</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/autoware/install/setup.bash
ros2<span class="w"> </span>launch<span class="w"> </span>lidar_centerpoint<span class="w"> </span>lidar_centerpoint.launch.xml<span class="w"> </span>build_only:<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>When the conversion command finishes, the engine file is output.
The output destination changes according to the model download method, so check that the output is in the appropriate directory.</p>
<h4 id="download-with-ansible_1">Download with ansible<a class="headerlink" href="#download-with-ansible_1" title="Permanent link">#</a></h4>
<p>An example of the use of autowarefoundation's autoware.universe is shown below.</p>
<p>The following file is output.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$HOME</span>/autoware_data/lidar_centerpoint/pts_backbone_neck_head_centerpoint_tiny.engine
<span class="nv">$HOME</span>/autoware_data/lidar_centerpoint/pts_voxel_encoder_centerpoint_tiny.engine
</code></pre></div>
<h4 id="automatic-download-at-package-build-time">Automatic download at package build time<a class="headerlink" href="#automatic-download-at-package-build-time" title="Permanent link">#</a></h4>
<p>The following file is output.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$HOME</span>/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/pts_backbone_neck_head_centerpoint_tiny.engine
<span class="nv">$HOME</span>/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/pts_voxel_encoder_centerpoint_tiny.engine
</code></pre></div>
<h2 id="evaluation-method">Evaluation method<a class="headerlink" href="#evaluation-method" title="Permanent link">#</a></h2>
<p>First, complete the setup procedure described in <a href="/docs/quick_start/setup.en.md">Setup Instructions</a>.</p>
<p>Once the setup is finished, user can start the perception evaluation using the sample rosbag provided at <code>~/driving_log_replayer_v2/sample_dataset</code>. with the command:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>driving_log_replayer_v2<span class="w"> </span>driving_log_replayer_v2.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>scenario_path:<span class="o">=</span><span class="nv">$HOME</span>/driving_log_replayer_v2/perception.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>sensing:<span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>driving_log_replayer_v2<span class="w"> </span>driving_log_replayer_v2.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>scenario_path:<span class="o">=</span><span class="nv">$HOME</span>/driving_log_replayer_v2/perception.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>remap_arg:<span class="o">=</span><span class="s2">&quot;/sensing/lidar/top/velodyne_packets,/sensing/lidar/left/velodyne_packets,/sensing/lidar/right/velodyne_packets&quot;</span>
</code></pre></div>
<blockquote>
<p>[!NOTE]<br />
sample rosbag includes packets to produce pointcloud and /sensing/lidar/concatenated/pointcloud. So it is necessary to either remap or not activate <code>sensing</code> to avoid topic duplication.</p>
</blockquote>
<p>This command will perform the following steps:</p>
<ol>
<li>launch the commands <code>logging_simulator.launch</code> and <code>ros2 bag play</code></li>
<li>Autoware receives the sensor data output from the rosbag and the perception module recognizes it</li>
<li>Record the output topics in the bag file</li>
<li>After rosbag playback is finished, parse the saved rosbag one message at a time and evaluate the target topic.</li>
</ol>
<h2 id="evaluation-results">Evaluation results<a class="headerlink" href="#evaluation-results" title="Permanent link">#</a></h2>
<p>The results are calculated for each subscription to judge pass/fail. The format and available states are described below.</p>
<h3 id="perception-normal">Perception Normal<a class="headerlink" href="#perception-normal" title="Permanent link">#</a></h3>
<p>Satisfy Criteria in the Criterion tag of the scenario.</p>
<p>The scenario.yaml of the sample is as follows,</p>
<div class="highlight"><pre><span></span><code><span class="nt">Criterion</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">PassRate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">95.0</span><span class="w"> </span><span class="c1"># How much (%) of the evaluation attempts are considered successful.</span>
<span class="w">    </span><span class="nt">CriteriaMethod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">num_gt_tp</span><span class="w"> </span><span class="c1"># refer https://github.com/tier4/driving_log_replayer_v2/blob/develop/driving_log_replayer_v2/driving_log_replayer_v2/criteria/perception.py#L136-L152</span>
<span class="w">    </span><span class="nt">CriteriaLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hard</span><span class="w"> </span><span class="c1"># Level of criteria (perfect/hard/normal/easy, or custom value 0.0-100.0)</span>
<span class="w">    </span><span class="nt">Filter</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0-50.0</span><span class="w"> </span><span class="c1"># [m] null [Do not filter by distance] or lower_limit-(upper_limit) [Upper limit can be omitted. If omitted value is 1.7976931348623157e+308]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">PassRate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">95.0</span><span class="w"> </span><span class="c1"># How much (%) of the evaluation attempts are considered successful.</span>
<span class="w">    </span><span class="nt">CriteriaMethod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">num_gt_tp</span><span class="w"> </span><span class="c1"># refer https://github.com/tier4/driving_log_replayer_v2/blob/develop/driving_log_replayer_v2/driving_log_replayer_v2/criteria/perception.py#L136-L152</span>
<span class="w">    </span><span class="nt">CriteriaLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">easy</span><span class="w"> </span><span class="c1"># Level of criteria (perfect/hard/normal/easy, or custom value 0.0-100.0)</span>
<span class="w">    </span><span class="nt">Filter</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0-</span><span class="w"> </span><span class="c1"># [m] null [Do not filter by distance] or lower_limit-(upper_limit) [Upper limit can be omitted. If omitted value is 1.7976931348623157e+308]</span>
</code></pre></div>
<ul>
<li>For each subscription of topic to judge pass/fail, the number of objects in tp is hard (75.0%) or more for objects at a distance of 0.0-50.0[m]. Frame of Result becomes Success.</li>
<li>For one subscription of topic to judge pass/fail, the number of objects in tp is easy (25.0%) or more for objects at a distance of 50.0-1.7976931348623157e+308[m]. Frame of Result becomes Success.</li>
<li>If the condition <code>PassRate &gt;= Normal / Total Received * 100</code> is satisfied, the Total of Result becomes Success.</li>
</ul>
<h3 id="perception-error">Perception Error<a class="headerlink" href="#perception-error" title="Permanent link">#</a></h3>
<p>The perception evaluation output is marked as <code>Error</code> when condition for <code>Normal</code> is not met.</p>
<h3 id="skipping-evaluation">Skipping evaluation<a class="headerlink" href="#skipping-evaluation" title="Permanent link">#</a></h3>
<p>Only add 1 to FrameSkip in the following cases.
FrameSkip is a counter for the number of times evaluation is skipped.</p>
<ul>
<li>No Ground Truth exists within 75msec before or after the received object's header time.</li>
<li>If the number of footprint.points of the received object is 1 or 2 (this condition will be removed when "perception_eval" is updated)</li>
</ul>
<h3 id="skipping-evaluationnogtnoobject">Skipping evaluation(NoGTNoObject)<a class="headerlink" href="#skipping-evaluationnogtnoobject" title="Permanent link">#</a></h3>
<ul>
<li>When the Ground Truth and the recognition objects are filtered by the filter condition and not evaluated (when the content of the evaluation result PassFail object is empty).</li>
</ul>
<h2 id="topic-name-and-data-type-used-by-evaluation-script">Topic name and data type used by evaluation script<a class="headerlink" href="#topic-name-and-data-type-used-by-evaluation-script" title="Permanent link">#</a></h2>
<p>The topic to determine pass/fail is based on the evaluation_task defined in scenario.yaml.</p>
<table>
<thead>
<tr>
<th>evaluation_task</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>detection</td>
<td>autoware_perception_msgs/msg/DetectedObjects</td>
</tr>
<tr>
<td>tracking</td>
<td>autoware_perception_msgs/msg/TrackedObjects</td>
</tr>
<tr>
<td>prediction</td>
<td>TBD</td>
</tr>
<tr>
<td>fp_validation</td>
<td>autoware_perception_msgs/msg/DetectedObjects</td>
</tr>
</tbody>
</table>
<p>The topic to be analyzed, independent of pass/fail, can be defined with the terminal argument USE_CASE_ARGS.</p>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>evaluation_detection_topic_regex</td>
<td>autoware_perception_msgs/msg/DetectedObjects</td>
</tr>
<tr>
<td>evaluation_tracking_topic_regex</td>
<td>autoware_perception_msgs/msg/TrackedObjects</td>
</tr>
<tr>
<td>evaluation_prediction_topic_regex</td>
<td>TBD</td>
</tr>
<tr>
<td>evaluation_fp_validation_topic_regex</td>
<td>autoware_perception_msgs/msg/DetectedObjects</td>
</tr>
</tbody>
</table>
<p>The results obtained through the evaluation are also written in rosbag.</p>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/driving_log_replayer_v2/marker/ground_truth</td>
<td>visualization_msgs/msg/MarkerArray</td>
</tr>
<tr>
<td>/driving_log_replayer_v2/marker/results</td>
<td>visualization_msgs/msg/MarkerArray</td>
</tr>
</tbody>
</table>
<h2 id="arguments-passed-to-logging_simulatorlaunch">Arguments passed to logging_simulator.launch<a class="headerlink" href="#arguments-passed-to-logging_simulatorlaunch" title="Permanent link">#</a></h2>
<ul>
<li>localization: false</li>
<li>planning: false</li>
<li>control: false</li>
</ul>
<p><strong>NOTE: The <code>tf</code> in the bag is used to align the localization during annotation and simulation. Therefore, localization is invalid.</strong></p>
<h2 id="dependent-libraries">Dependent libraries<a class="headerlink" href="#dependent-libraries" title="Permanent link">#</a></h2>
<p>The perception evaluation step bases on the <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a> library.</p>
<h3 id="division-of-roles-of-driving_log_replayer_v2-with-dependent-libraries">Division of roles of driving_log_replayer_v2 with dependent libraries<a class="headerlink" href="#division-of-roles-of-driving_log_replayer_v2-with-dependent-libraries" title="Permanent link">#</a></h3>
<p><code>driving_log_replayer_v2</code> package is in charge of the part of the relationship with ROS and the part that determines pass/fail. The actual perception evaluation is conducted in <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a> library.
The <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a> is a ROS-independent library, it cannot receive ROS objects. Also, ROS timestamps use nanoseconds while the <code>t4_dataset</code> format is based on microseconds (because it uses <code>nuScenes</code>), so the values must be properly converted before using the library's functions.</p>
<p><code>driving_log_replayer_v2</code> subscribes the topic output from the perception module of Autoware, converts it to the data format defined in <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a>, and passes it on.
It is also responsible for publishing and visualizing the evaluation results from <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a> on proper ROS topic.</p>
<p><a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a> is in charge of the part that compares the detection results passed from <code>driving_log_replayer_v2</code> with ground truth data, calculates the index, and outputs the evaluations.</p>
<h2 id="about-simulation">About simulation<a class="headerlink" href="#about-simulation" title="Permanent link">#</a></h2>
<p>State the information required to run the simulation.</p>
<h3 id="topic-to-be-included-in-the-input-rosbag">Topic to be included in the input rosbag<a class="headerlink" href="#topic-to-be-included-in-the-input-rosbag" title="Permanent link">#</a></h3>
<p>Must contain the required topics in <code>t4_dataset</code> format.</p>
<p>The vehicle's ECU CAN and sensors data topics are required for the evaluation to be run correctly.</p>
<p>If more than one CAMERA is attached, all camera_info and image_rect_color_compressed should be included.
In addition, /sensing/lidar/concatenated/pointcloud is remapped to avoid duplication depending on true or false of sensing.</p>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/pacmod/from_can_bus</td>
<td>can_msgs/msg/Frame</td>
</tr>
<tr>
<td>/sensing/camera/camera*/camera_info</td>
<td>sensor_msgs/msg/CameraInfo</td>
</tr>
<tr>
<td>/sensing/camera/camera*/image_rect_color/compressed</td>
<td>sensor_msgs/msg/CompressedImage</td>
</tr>
<tr>
<td>/sensing/lidar/concatenated/pointcloud</td>
<td>sensor_msgs/msg/PointCloud2</td>
</tr>
<tr>
<td>/sensing/lidar/*/velodyne_packets</td>
<td>velodyne_msgs/VelodyneScan</td>
</tr>
<tr>
<td>/tf</td>
<td>tf2_msgs/msg/TFMessage</td>
</tr>
</tbody>
</table>
<p>The vehicle topics can be included instead of CAN.</p>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/pacmod/from_can_bus</td>
<td>can_msgs/msg/Frame</td>
</tr>
<tr>
<td>/sensing/camera/camera*/camera_info</td>
<td>sensor_msgs/msg/CameraInfo</td>
</tr>
<tr>
<td>/sensing/camera/camera*/image_rect_color/compressed</td>
<td>sensor_msgs/msg/CompressedImage</td>
</tr>
<tr>
<td>/sensing/lidar/concatenated/pointcloud</td>
<td>sensor_msgs/msg/PointCloud2</td>
</tr>
<tr>
<td>/sensing/lidar/*/velodyne_packets</td>
<td>velodyne_msgs/VelodyneScan</td>
</tr>
<tr>
<td>/tf</td>
<td>tf2_msgs/msg/TFMessage</td>
</tr>
<tr>
<td>/vehicle/status/control_mode</td>
<td>autoware_vehicle_msgs/msg/ControlModeReport</td>
</tr>
<tr>
<td>/vehicle/status/gear_status</td>
<td>autoware_vehicle_msgs/msg/GearReport</td>
</tr>
<tr>
<td>/vehicle/status/steering_status</td>
<td>autoware_vehicle_msgs/SteeringReport</td>
</tr>
<tr>
<td>/vehicle/status/turn_indicators_status</td>
<td>autoware_vehicle_msgs/msg/TurnIndicatorsReport</td>
</tr>
<tr>
<td>/vehicle/status/velocity_status</td>
<td>autoware_vehicle_msgs/msg/VelocityReport</td>
</tr>
</tbody>
</table>
<h3 id="topics-that-must-not-be-included-in-the-input-rosbag">Topics that must not be included in the input rosbag<a class="headerlink" href="#topics-that-must-not-be-included-in-the-input-rosbag" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Topic name</th>
<th>Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>/clock</td>
<td>rosgraph_msgs/msg/Clock</td>
</tr>
</tbody>
</table>
<p>The clock is output by the --clock option of ros2 bag play, so if it is recorded in the bag itself, it is output twice, so it is not included in the bag.</p>
<h2 id="about-evaluation">About Evaluation<a class="headerlink" href="#about-evaluation" title="Permanent link">#</a></h2>
<p>State the information necessary for the evaluation.</p>
<h3 id="scenario-format">Scenario Format<a class="headerlink" href="#scenario-format" title="Permanent link">#</a></h3>
<p>There are two types of evaluation: use case evaluation and database evaluation.
Use case evaluation is performed on a single dataset, while database evaluation uses multiple datasets and takes the average of the results for each dataset.</p>
<p>In the database evaluation, the <code>vehicle_id</code> should be able to be set for each data set, since the calibration values may change.
Also, it is necessary to set whether or not to activate the sensing module.</p>
<p>See <a href="https://github.com/tier4/driving_log_replayer_v2/blob/develop/sample/perception/scenario.yaml">sample</a>.</p>
<h3 id="evaluation-result-format">Evaluation Result Format<a class="headerlink" href="#evaluation-result-format" title="Permanent link">#</a></h3>
<p>See <a href="https://github.com/tier4/driving_log_replayer_v2/blob/develop/sample/perception/result.json">sample</a>.</p>
<p>The evaluation results by <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a> under the conditions specified in the scenario are output for each frame.
Only the final line has a different format from the other lines since the final metrics are calculated after all data has been flushed.</p>
<p>The format of each frame and the metrics format are shown below.
<strong>NOTE: common part of the result file format, which has already been explained, is omitted.</strong></p>
<p>Format of each frame:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;FrameName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Frame number of t4_dataset used for evaluation&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;FrameSkip&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The total number of times the evaluation was skipped, which occurs when the evaluation of an object is requested but there is no Ground Truth in the dataset within 75msec, or when the number of footprint.points is 1 or 2.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;criteria0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// result of criteria 0, If the Ground Truth and recognition objects exist</span>
<span class="w">      </span><span class="nt">&quot;PassFail&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;Total&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success or Fail&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success or Fail&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;Info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;TP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Number of filtered objects determined to be TP&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;FP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Number of filtered objects determined to be FP&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;FN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Number of filtered objects determined to be FN&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;Objects&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// Evaluated objects information. See the [json schema](../../driving_log_replayer_v2/config/perception/object_output_schema.json) for details.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;criteria1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// result of criteria 1. If the Ground Truth and the recognition objects do not exist</span>
<span class="w">      </span><span class="nt">&quot;NoGTNoObj&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Number of times that the Ground Truth and the recognition objects were filtered and could not be evaluated.&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Information Data Format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Info&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Information Message&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;FrameSkip&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Total number of times the evaluation was skipped. This occurs when you request the evaluation of an object but there is no ground truth value within 75msec in the dataset or footprint.points is 1 or 2.&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Warning Data Format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Warning&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Warning Message&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;FrameSkip&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The total number of times the evaluation was skipped, which occurs when the evaluation of an object is requested but there is no Ground Truth in the dataset within 75msec, or when the number of footprint.points is 1 or 2.&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Objects Data Format:</p>
<p>See <a href="../../driving_log_replayer_v2/config/perception/object_output_schema.json">json schema</a></p>
<p>Metrics Data Format:</p>
<p>When the <code>evaluation_task</code> is detection or tracking</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;FinalScore&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Score&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;TP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TP rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TP rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TP rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;FP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FP rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FP rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FP rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;FN&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FN rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FN rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FN rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;TN&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TN rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TN rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TN rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;AP(Center Distance)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(Center Distance) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(Center Distance) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(Center Distance) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;APH(Center Distance)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(Center Distance) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(Center Distance) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(Center Distance) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;AP(IoU 2D)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(IoU 2D) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(IoU 2D) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(IoU 2D) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;APH(IoU 2D)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(IoU 2D) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(IoU 2D) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(IoU 2D) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;AP(IoU 3D)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(IoU 3D) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(IoU 3D) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(IoU 3D) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;APH(IoU 3D)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(IoU 3D) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(IoU 3D) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(IoU 3D) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;AP(Plane Distance)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(Plane Distance) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(Plane Distance) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AP(Plane Distance) rate of label1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;APH(Plane Distance)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(Plane Distance) rate for all labels&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(Plane Distance) rate of label0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;label1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APH(Plane Distance) rate of label1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;MOTA&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;https://github.com/tier4/autoware_perception_evaluation/blob/develop/docs/en/perception/metrics.md#tracking&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;MOTA&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;https://github.com/tier4/autoware_perception_evaluation/blob/develop/docs/en/perception/metrics.md#tracking&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;IDswitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;https://github.com/tier4/autoware_perception_evaluation/blob/develop/docs/en/perception/metrics.md#id-switch&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;Error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;ALL&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;average&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yaw&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;length&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;width&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;nn_plane&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nearest neighbor plane distance&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;rms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yaw&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;length&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;width&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;nn_plane&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nearest neighbor plane distance&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;std&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yaw&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;length&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;width&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;nn_plane&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nearest neighbor plane distance&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yaw&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;length&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;width&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;nn_plane&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nearest neighbor plane distance&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y position&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yaw&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;length&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;width&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;vy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y velocity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;nn_plane&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nearest neighbor plane distance&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;label0&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Error metrics for the label0&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>When the <code>evaluation_task</code> is fp_validation</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Frame&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;FinalScore&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;GroundTruthStatus&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;UUID&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;rate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;TP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TP rate of the displyed UUID&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;FP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FP rate of the displyed UUID&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;TN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TN rate of the displyed UUID&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;FN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FN rate of the displyed UUID&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;frame_nums&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;List of frame numbers, which GT is evaluated&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;TP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;List of frame numbers, which GT is evaluated as TP&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;FP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;List of frame numbers, which GT is evaluated as FP&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;TN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;List of frame numbers, which GT is evaluated as TN&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;FN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;List of frame numbers, which GT is evaluated as FN&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;Scene&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;TP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TP rate of the scene&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;FP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FP rate of the scene&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;TN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TN rate of the scene&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;FN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FN rate of the scene&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="pickle-file">pickle file<a class="headerlink" href="#pickle-file" title="Permanent link">#</a></h3>
<p>In database evaluation, it is necessary to replay multiple rosbags, but due to the ROS specification, it is impossible to use multiple bags in a single launch.
Since one rosbag, i.e., one <code>t4_dataset</code>, requires one launch, it is necessary to execute as many launches as the number of datasets contained in the database evaluation.</p>
<p>Since database evaluation cannot be done in a single launch, perception outputs a file <code>scene_result.pkl</code> in addition to <code>result.jsonl</code> file.
A pickle file is a python object saved as a file, PerceptionEvaluationManager.frame_results of <a href="https://github.com/tier4/autoware_perception_evaluation">perception_eval</a>.
The dataset evaluation can be performed by reading all the objects recorded in the pickle file and outputting the index of the dataset's average.</p>
<h3 id="result-file-of-database-evaluation">Result file of database evaluation<a class="headerlink" href="#result-file-of-database-evaluation" title="Permanent link">#</a></h3>
<p>In the case of a database evaluation with multiple datasets in the scenario, a file named <code>database_result.json</code> is output to the results directory.</p>
<p>The format is the same as the <a href="#evaluation-result-format">Metrics Data Format</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../obstacle_segmentation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Evaluate point cloud generation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Evaluate point cloud generation
              </div>
            </div>
          </a>
        
        
          
          <a href="../performance_diag/" class="md-footer__link md-footer__link--next" aria-label="Next: Evaluate LiDAR diagnostics">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Evaluate LiDAR diagnostics
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 TIER IV Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>